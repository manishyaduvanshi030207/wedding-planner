<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Planner</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <script>
        // Redirect to login page if not logged in
        if (!localStorage.getItem('email') || !localStorage.getItem('password')) {
            window.location.href = 'login.html';
        }
    </script>
    <div class="background-container">
        <div class="form-container">
            <h1>Wedding Planner</h1>
            <button id="logout-btn">Logout</button>
            <form id="wedding-form" action="https://formspree.io/f/mayqzrgv" method="POST">
                <div class="form-group">
                    <label for="venue">Venue:</label>
                    <input type="text" id="venue" name="venue" required>
                </div>
                <div class="form-group">
                    <label for="date">Date:</label>
                    <input type="date" id="date" name="date" required>
                </div>

                <div class="menu-section">
                    <div class="menu-column">
                        <h3>Non-Veg (in kg)</h3>
                        <label for="chicken">Chicken:</label>
                        <input type="number" id="chicken" name="chicken" min="0" step="0.1">
                        <label for="mutton">Mutton:</label>
                        <input type="number" id="mutton" name="mutton" min="0" step="0.1">
                        <label for="fish">Fish:</label>
                        <input type="number" id="fish" name="fish" min="0" step="0.1">
                        <label for="crab">Crab:</label>
                        <input type="number" id="crab" name="crab" min="0" step="0.1">
                    </div>

                    <div class="menu-column">
                        <h3>Vegetables (in kg)</h3>
                        <label for="potato">Potato:</label>
                        <input type="number" id="potato" name="potato" min="0" step="0.1">
                        <label for="tomato">Tomato:</label>
                        <input type="number" id="tomato" name="tomato" min="0" step="0.1">
                        <label for="onion">Onion:</label>
                        <input type="number" id="onion" name="onion" min="0" step="0.1">
                        <label for="carrot">Carrot:</label>
                        <input type="number" id="carrot" name="carrot" min="0" step="0.1">
                    </div>

                    <div class="menu-column">
                        <h3>Appetizers & Drinks</h3>
                        <label for="snacks">Snacks:</label>
                        <input type="text" id="snacks" name="snacks">
                        <label for="softdrinks">Soft Drinks:</label>
                        <input type="text" id="softdrinks" name="softdrinks">
                        <label for="alcohol">Alcohol:</label>
                        <input type="text" id="alcohol" name="alcohol">
                    </div>

                    <div class="menu-column">
                        <h3>Custom Menu</h3>
                        <textarea id="custom" name="custom" placeholder="Write your custom menu"></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <h3>Guest List</h3>
                    <input type="text" id="guest-name" name="guest-name" placeholder="Enter guest name">
                    <button type="button" id="add-guest">Add Guest</button>
                    <ul id="guest-names"></ul>
                </div>

                <!-- Hidden input to dynamically send to the user's Gmail -->
                <input type="hidden" name="_replyto" value="">

                <button type="submit" id="submit-btn">Submit</button>
            </form>
            <button id="history-btn">View History</button>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
    <script>
        // Ensure the form captures the user's Gmail address dynamically
        document.querySelector("form").addEventListener("submit", function(event) {
            var userEmail = document.querySelector("input[name='email']").value;
            document.querySelector("input[name='_replyto']").value = userEmail; // Set the email dynamically
        });

        // Handle logout
        document.getElementById('logout-btn').addEventListener('click', function() {
            localStorage.removeItem('email');
            localStorage.removeItem('password');
            window.location.href = 'login.html';
        });

        // Handle history button click
        document.getElementById('history-btn').addEventListener('click', function() {
            window.location.href = 'history.html';
        });
    </script>
</body>
</html>
